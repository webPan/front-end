<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.15" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>VuePress</title><meta name="description" content="My first VuePress Site">
    <link rel="preload" href="/front-end/blog/assets/style-OK2r47JC.css" as="style"><link rel="stylesheet" href="/front-end/blog/assets/style-OK2r47JC.css">
    <link rel="modulepreload" href="/front-end/blog/assets/app-9v1S0hVW.js"><link rel="modulepreload" href="/front-end/blog/assets/react.html-DPYesZ5D.js">
    <link rel="prefetch" href="/front-end/blog/assets/algorithm.html-CTvAnGnM.js" as="script"><link rel="prefetch" href="/front-end/blog/assets/base.html-B-G7AuIw.js" as="script"><link rel="prefetch" href="/front-end/blog/assets/blog.html-BmvfQMUB.js" as="script"><link rel="prefetch" href="/front-end/blog/assets/es6.html-TcNF1lNp.js" as="script"><link rel="prefetch" href="/front-end/blog/assets/get-started.html-DlO2QkQo.js" as="script"><link rel="prefetch" href="/front-end/blog/assets/index.html-Ig2jHQfA.js" as="script"><link rel="prefetch" href="/front-end/blog/assets/intermediate.html-wQLITW4I.js" as="script"><link rel="prefetch" href="/front-end/blog/assets/mobile.html-qYgQmYEp.js" as="script"><link rel="prefetch" href="/front-end/blog/assets/principle.html-znEhWync.js" as="script"><link rel="prefetch" href="/front-end/blog/assets/senior.html-9nV1PkSe.js" as="script"><link rel="prefetch" href="/front-end/blog/assets/vue.html-DN-nEWOZ.js" as="script"><link rel="prefetch" href="/front-end/blog/assets/vue3.html-BwMiavtv.js" as="script"><link rel="prefetch" href="/front-end/blog/assets/404.html-Deg09u_r.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/front-end/blog/"><img class="vp-site-logo" src="https://vuejs.press/images/hero.png" alt="VuePress"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">VuePress</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/base.html" aria-label="初级"><!---->初级<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/intermediate.html" aria-label="中级"><!---->中级<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/senior.html" aria-label="高级"><!---->高级<!----></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/front-end/blog/react.html" aria-label="React"><!---->React<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/vue.html" aria-label="Vue"><!---->Vue<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/vue3.html" aria-label="Vue3"><!---->Vue3<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/mobile.html" aria-label="移动端"><!---->移动端<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/es6.html" aria-label="Es6"><!---->Es6<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/principle.html" aria-label="原理"><!---->原理<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/algorithm.html" aria-label="算法"><!---->算法<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/blog.html" aria-label="经典博文"><!---->经典博文<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/base.html" aria-label="初级"><!---->初级<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/intermediate.html" aria-label="中级"><!---->中级<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/senior.html" aria-label="高级"><!---->高级<!----></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/front-end/blog/react.html" aria-label="React"><!---->React<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/vue.html" aria-label="Vue"><!---->Vue<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/vue3.html" aria-label="Vue3"><!---->Vue3<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/mobile.html" aria-label="移动端"><!---->移动端<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/es6.html" aria-label="Es6"><!---->Es6<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/principle.html" aria-label="原理"><!---->原理<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/algorithm.html" aria-label="算法"><!---->算法<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/front-end/blog/blog.html" aria-label="经典博文"><!---->经典博文<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h2 id="react-生命周期" tabindex="-1"><a class="header-anchor" href="#react-生命周期"><span>React 生命周期</span></a></h2><p>组件的生命周期可分成三个状态：</p><ul><li><code>Mounting</code>(挂载)：已插入真实 DOM</li><li><code>Updating</code>(更新)：正在被重新渲染</li><li><code>Unmounting</code>(卸载)：已移出真实 DOM <img src="/front-end/blog/assets/react-CgmdUieN.png" alt="cmd-markdown-logo"></li></ul><h4 id="挂载" tabindex="-1"><a class="header-anchor" href="#挂载"><span>挂载</span></a></h4><ul><li><code>componentWillMount</code>： 在渲染之前执行，用于根组件中的 App 级配置</li><li><code>componentDidMount</code>： 在第一次渲染之后执行，可以在这里做AJAX请求，DOM 的操作或状态更新以及设置事件监听器。</li></ul><h4 id="更新" tabindex="-1"><a class="header-anchor" href="#更新"><span>更新</span></a></h4><ul><li><code>componentWillReceiveProps</code>： 在初始化<code>render</code>的时候不会执行，它会在组件接受到新的状态(<code>Props</code>)时被触发，一般用于父组件状态更新时子组件的重新渲染</li><li><code>shouldComponentUpdate</code>： 确定是否更新组件。默认情况下，<code>它返回true</code>。如果确定在 <code>state</code> 或 <code>props</code> 更新后组件不需要在重新渲染，则可以返回<code>false</code>，这是一个提高性能的方法。</li><li><code>componentWillUpdate</code>： 在<code>shouldComponentUpdate</code>返回 <code>true</code> 确定要更新组件之前件之前执行</li><li><code>componentDidUpdate</code>： 它主要用于更新DOM以响应<code>props</code>或<code>state</code>更改</li></ul><h4 id="卸载" tabindex="-1"><a class="header-anchor" href="#卸载"><span>卸载</span></a></h4><ul><li><code>componentWillUnmount</code>: 它用于取消任何的网络请求，或删除与组件关联的所有事件监听器</li></ul><h2 id="react组件通讯" tabindex="-1"><a class="header-anchor" href="#react组件通讯"><span>React组件通讯</span></a></h2><p><strong>父向子通讯</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token comment">//父组件</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span> <span class="token comment">//引入useState 函数</span></span>
<span class="line"><span class="token keyword">import</span> reactDom <span class="token keyword">from</span> <span class="token string">&#39;react-dom&#39;</span> </span>
<span class="line"><span class="token keyword">import</span> Son <span class="token keyword">from</span> <span class="token string">&#39;./son&#39;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Father</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>num<span class="token punctuation">,</span> setNum<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 0 是初始值 返回值是一个数组</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>setNum<span class="token punctuation">)</span><span class="token comment">// 修改状态的函数setNum</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">            父组件</span>
<span class="line">            <span class="token operator">&lt;</span>Son num<span class="token operator">=</span><span class="token punctuation">{</span>num<span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span></span>
<span class="line">                    children的值</span>
<span class="line">                <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>Son<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">reactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Father<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Father<span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//子组件</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">son</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">const</span> <span class="token punctuation">{</span> num <span class="token punctuation">}</span> <span class="token operator">=</span> props</span>
<span class="line">   <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">           <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token literal-property property">子组件</span><span class="token operator">:</span><span class="token punctuation">{</span>num<span class="token punctuation">}</span></span>
<span class="line">              <span class="token literal-property property">子组件内部的</span><span class="token operator">:</span><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span>
<span class="line">           <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">   <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>子向父通讯</strong><br> 子传父之间的传值归根结底就是在父组件中定义一个函数,然后传到子组件后进行调用,也是一种父传子的表现</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token comment">//父组件</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span></span>
<span class="line"> <span class="token keyword">import</span> reactDom <span class="token keyword">from</span> <span class="token string">&#39;react-dom&#39;</span></span>
<span class="line"> <span class="token keyword">import</span> Son <span class="token keyword">from</span> <span class="token string">&#39;./son&#39;</span></span>
<span class="line"> <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Father</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">const</span> <span class="token punctuation">[</span>num<span class="token punctuation">,</span> setNum<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">   <span class="token comment">//   console.log(setNum)</span></span>
<span class="line">   <span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//定义一个函数</span></span>
<span class="line">     <span class="token function">setNum</span><span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment">//调用修改数据的方法</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line">   <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">         <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">             父组件</span>
<span class="line">             <span class="token operator">&lt;</span>Son num<span class="token operator">=</span><span class="token punctuation">{</span>num<span class="token punctuation">}</span> fn<span class="token operator">=</span><span class="token punctuation">{</span>fn<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Son<span class="token operator">&gt;</span> <span class="token comment">//将函数传入子组件</span></span>
<span class="line">         <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">   <span class="token punctuation">)</span></span>
<span class="line"> <span class="token punctuation">}</span></span>
<span class="line"> reactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Father<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Father<span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//子组件</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">son</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">const</span> <span class="token punctuation">{</span> num<span class="token punctuation">,</span> fn <span class="token punctuation">}</span> <span class="token operator">=</span> props</span>
<span class="line">   <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">           <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">              <span class="token literal-property property">子组件</span><span class="token operator">:</span><span class="token punctuation">{</span>num<span class="token punctuation">}</span></span>
<span class="line">              <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>fn<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span> <span class="token comment">//子组件内调用</span></span>
<span class="line">              注意<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>  如果需要传入参数 onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token function">fn</span><span class="token punctuation">(</span>参数<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">              <span class="token comment">//避免出现加载就触发</span></span>
<span class="line">           <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">   <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="state与props有什么区别" tabindex="-1"><a class="header-anchor" href="#state与props有什么区别"><span>state与props有什么区别</span></a></h2><ul><li><code>props</code>是外部组件传入的数据，一般是父组件传到子组件的数据。<code>props</code>里面的数据不能修改，只能通过绑定父组件的方法来修改<code>props</code>里面的值，然后再传到子组件。</li><li><code>state</code>是组件的私有变量。主要用于组件的保存，控制以及修改自己的状态，不能通过外部的访问以及修改，只能通过内部的<code>this.setState</code>方法来修改<code>state</code>里面的内容。</li></ul><h2 id="请列举几个常用的hooks" tabindex="-1"><a class="header-anchor" href="#请列举几个常用的hooks"><span>请列举几个常用的Hooks</span></a></h2><h4 id="什么是react-hooks" tabindex="-1"><a class="header-anchor" href="#什么是react-hooks"><span>什么是React Hooks？</span></a></h4><p>React Hooks 是React 16.8引入的一种特性，它允许在函数组件中使用状态和其他React特性，而不需要编写类组件。通过Hooks，开发者可以在函数组件中管理状态、执行副作用等操作，从而使代码更加简洁、可重用性更高。</p><h4 id="常用的react-hooks" tabindex="-1"><a class="header-anchor" href="#常用的react-hooks"><span>常用的React Hooks</span></a></h4><ol><li><p><strong>useState</strong></p><ul><li>用途：用于在函数组件中添加状态。它返回一个状态变量和一个更新状态的函数。</li><li>示例：<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul></li><li><p><strong>useEffect</strong></p><ul><li>用途：用于在函数组件中执行副作用操作，例如数据获取、订阅或手动更改DOM。它接受一个函数和一个依赖项数组，当依赖项发生变化时，副作用函数会被重新执行。</li><li>示例：<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>useContext</strong></p><ul><li>用途：用于在函数组件中使用上下文对象，从而避免通过层层传递props来共享数据。</li><li>示例：<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>ThemeContext<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul></li><li><p><strong>useReducer</strong></p><ul><li>用途：用于在函数组件中管理复杂的状态逻辑，类似于Redux中的reducer。适用于状态变化比较复杂或涉及多个子值的场景。</li><li>示例：<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul></li><li><p><strong>useRef</strong></p><ul><li>用途：用于访问DOM元素或保持某个变量在组件生命周期内不变。它返回一个可变的ref对象，该对象在组件的整个生命周期内保持不变。</li><li>示例：<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul></li><li><p><strong>useMemo</strong></p><ul><li>用途：用于性能优化，通过记住函数的返回值，避免在每次渲染时都重新计算。仅当依赖项变化时才会重新计算。</li><li>示例：<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> memoizedValue <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">computeExpensiveValue</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul></li><li><p><strong>useCallback</strong></p><ul><li>用途：用于性能优化，通过记住函数实例，避免子组件的无谓重新渲染。仅当依赖项变化时才会生成新的函数实例。</li><li>示例：<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> memoizedCallback <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">doSomething</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ol><p>React Hooks 提高了函数组件的灵活性，使得在React应用中编写简洁、高效的代码变得更加容易。</p><h2 id="usestate和usereducer的优缺点" tabindex="-1"><a class="header-anchor" href="#usestate和usereducer的优缺点"><span>useState和useReducer的优缺点</span></a></h2><p>在React中，可以使用<code>useState</code>和<code>useReducer</code>两个Hook来管理组件的状态。</p><h4 id="usestate" tabindex="-1"><a class="header-anchor" href="#usestate"><span>useState</span></a></h4><p><code>useState</code>是最简单的状态管理工具。适合管理组件中少量且独立的状态。</p><p><strong>优点</strong>：</p><ul><li><strong>简单易用</strong>：<code>useState</code>的API设计非常简单，适合管理简单的、非复杂状态。</li><li><strong>轻量化</strong>：由于API的简单性，当状态较为简单时，<code>useState</code>代码更易读、维护。</li></ul><p><strong>缺点</strong>：</p><ul><li><strong>难以处理复杂状态</strong>：当状态逻辑较为复杂，或需要管理多个相关状态时，使用<code>useState</code>可能会导致代码繁杂、难以维护。</li><li><strong>依赖过多的<code>useState</code>调用</strong>：对于复杂状态管理，使用多个<code>useState</code>会导致状态管理分散，增加组件的复杂性。</li></ul><h4 id="usereducer" tabindex="-1"><a class="header-anchor" href="#usereducer"><span>useReducer</span></a></h4><p><code>useReducer</code>通常用于状态更复杂、需要多种状态操作的场景，类似于Redux中的reducer概念。</p><p><strong>优点</strong>：</p><ul><li><strong>适合复杂状态逻辑</strong>：对于状态变化较复杂的场景，<code>useReducer</code>提供了清晰的状态管理结构，将状态逻辑集中在一个reducer函数中。</li><li><strong>更好的可扩展性</strong>：由于状态逻辑集中，添加新的状态处理逻辑（即action）时只需修改reducer函数，代码维护性较高。</li></ul><p><strong>缺点</strong>：</p><ul><li><strong>使用较为复杂</strong>：相比<code>useState</code>，<code>useReducer</code>需要定义action类型、reducer函数等，学习曲线稍陡。</li><li><strong>样板代码较多</strong>：使用<code>useReducer</code>通常需要编写较多的样板代码，可能在简单场景下显得臃肿。</li></ul><h4 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h4><ul><li>当管理简单、独立的状态时，<code>useState</code>是更好的选择。</li><li>当状态逻辑复杂，需要多个操作影响状态时，<code>useReducer</code>更合适。</li></ul><h2 id="useeffect-hook是如何工作的" tabindex="-1"><a class="header-anchor" href="#useeffect-hook是如何工作的"><span>useEffect Hook是如何工作的</span></a></h2><p><code>useEffect</code> 是 React 中的一个 Hook，用于在函数组件中处理副作用。副作用可以是数据获取、订阅、手动 DOM 操作、日志记录等。<code>useEffect</code> 让你在函数组件中执行这些副作用，而无需使用类组件的生命周期方法（如 <code>componentDidMount</code>、<code>componentDidUpdate</code> 和 <code>componentWillUnmount</code>）。</p><h4 id="基本用法" tabindex="-1"><a class="header-anchor" href="#基本用法"><span>基本用法</span></a></h4><p><code>useEffect</code> 接受两个参数：</p><ol><li><strong>副作用函数</strong>：这是一个将在组件渲染后执行的函数。</li><li><strong>依赖数组（可选）</strong>：数组中的值决定了副作用函数的执行时机。只有当依赖项发生变化时，React 才会重新运行副作用函数。如果不提供依赖数组，副作用将在每次组件渲染后执行；如果传递一个空数组，副作用只会在组件挂载和卸载时执行。</li></ol><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx" data-title="jsx"><pre><code><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">ExampleComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;组件已挂载&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;组件将卸载&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">   <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello, World!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="常见使用场景" tabindex="-1"><a class="header-anchor" href="#常见使用场景"><span>常见使用场景</span></a></h4><ol><li><strong>数据获取</strong>：使用 useEffect 来从 API 获取数据，并在组件首次渲染时执行。</li></ol><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;https://api.example.com/data&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token comment">// 设置数据到 state 中</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line">   <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 空依赖数组表示只在挂载时执行</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>订阅与清理</strong>：设置 WebSocket、事件监听器等订阅，并在组件卸载时进行清理。</li></ol><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">const</span> <span class="token function-variable function">handleResize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;窗口大小改变&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">   window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;resize&#39;</span><span class="token punctuation">,</span> handleResize<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">   <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;resize&#39;</span><span class="token punctuation">,</span> handleResize<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 只在挂载和卸载时执行</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><strong>依赖更新</strong>：根据特定依赖的变化来执行副作用，比如在表单输入改变时执行某些操作。</li></ol><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;表单输入改变了&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>formInput<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 仅在 formInput 改变时执行</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="usememo和usecallback的区别" tabindex="-1"><a class="header-anchor" href="#usememo和usecallback的区别"><span>useMemo和useCallback的区别</span></a></h2><ul><li><p><strong>useMemo</strong></p><ul><li><strong>功能</strong>：<code>useMemo</code> 用于缓存计算结果。它会在依赖项发生变化时重新计算该值，并返回缓存的结果，以减少不必要的计算开销。</li><li><strong>使用场景</strong>： <ul><li>当有昂贵的计算需要在渲染过程中使用时，使用 <code>useMemo</code> 可以避免每次渲染时都重新计算。</li><li>在列表渲染中使用 <code>useMemo</code> 来避免不必要的重新渲染（例如，缓存计算后的列表数据）。</li></ul></li><li><strong>示例</strong>：<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> memoizedValue <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">computeExpensiveValue</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul></li><li><p><strong>useCallback</strong></p><ul><li><strong>功能</strong>：<code>useCallback</code> 用于缓存函数的引用。它返回一个记忆化的回调函数，该回调函数仅在依赖项发生变化时才会更新，从而避免在子组件不必要的重新渲染。</li><li><strong>使用场景</strong>： <ul><li>当你将回调函数传递给子组件时，使用 <code>useCallback</code> 可以避免子组件因为接收到新的回调函数而触发不必要的重新渲染。</li><li>用于优化组件性能，特别是在依赖项变化不频繁的情况下。</li></ul></li><li><strong>示例</strong>：<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> memoizedCallback <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">doSomething</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h4 id="总结-1" tabindex="-1"><a class="header-anchor" href="#总结-1"><span>总结</span></a></h4><ul><li><code>useMemo</code> 用于缓存计算结果，避免昂贵的计算在每次渲染时重复执行。</li><li><code>useCallback</code> 用于缓存函数引用，避免不必要的重新渲染。</li><li>两者都可以用于性能优化，但适用的场景不同：<code>useMemo</code> 主要针对值的计算，<code>useCallback</code> 主要针对函数的稳定性。</li></ul><h2 id="useeffect和uselayouteffect-的区别" tabindex="-1"><a class="header-anchor" href="#useeffect和uselayouteffect-的区别"><span>useEffect和useLayoutEffect 的区别</span></a></h2><ul><li><p><strong><code>useEffect</code></strong></p><ul><li><strong>功能</strong>：<code>useEffect</code> 是一种副作用钩子，允许你在组件渲染后执行副作用操作。它的执行是在浏览器完成布局和绘制之后，因此它不会阻塞浏览器更新屏幕的过程。</li><li><strong>使用时机</strong>： <ul><li>当副作用不需要阻塞浏览器绘制时，使用 <code>useEffect</code> 是合适的。例如，网络请求、订阅、手动 DOM 操作等。</li><li><code>useEffect</code> 的执行顺序是在浏览器渲染完成后，这意味着用户会先看到更新后的 UI，再执行副作用。</li></ul></li><li><strong>示例</strong>：<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 执行副作用操作，例如数据获取或订阅</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>dependencies<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong><code>useLayoutEffect</code></strong></p><ul><li><strong>功能</strong>：<code>useLayoutEffect</code> 与 <code>useEffect</code> 类似，但它在浏览器执行任何绘制之前同步执行。这意味着在 <code>useLayoutEffect</code> 中执行的代码会阻塞页面的渲染，直到执行完毕。</li><li><strong>使用时机</strong>： <ul><li>当副作用需要在浏览器绘制前同步执行时，使用 <code>useLayoutEffect</code> 更合适。例如，测量 DOM 元素的大小和位置、强制 DOM 更新等。</li><li><code>useLayoutEffect</code> 在所有 DOM 变更被应用之后但在屏幕更新之前执行，这保证了在用户看到页面前 DOM 是最新的。</li></ul></li><li><strong>示例</strong>：<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token function">useLayoutEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 执行同步的 DOM 操作，例如测量 DOM 元素</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>dependencies<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h4 id="总结-2" tabindex="-1"><a class="header-anchor" href="#总结-2"><span>总结</span></a></h4><ul><li><p><code>useEffect</code> 是非阻塞的，副作用在浏览器完成布局和绘制后执行。适用于不需要立即生效的操作。</p></li><li><p><code>useLayoutEffect</code> 是阻塞的，副作用在浏览器绘制之前执行。适用于需要在用户看到页面前立即生效的操作。</p></li><li><p><strong>性能考虑</strong>：由于 <code>useLayoutEffect</code> 会阻塞页面的渲染，因此在不需要阻塞的情况下，应优先使用 <code>useEffect</code>。</p></li></ul><h2 id="react-中的-portals" tabindex="-1"><a class="header-anchor" href="#react-中的-portals"><span>React 中的 Portals</span></a></h2><ul><li><strong>Portals</strong> 是 React 提供的一种将子组件渲染到父组件 DOM 层次结构之外的功能。</li><li>使用 <code>ReactDOM.createPortal</code> 方法，可以将子组件渲染到指定的 DOM 节点，而不必局限于默认的父组件 DOM 树结构中。</li></ul><h4 id="portals-的作用" tabindex="-1"><a class="header-anchor" href="#portals-的作用"><span>Portals 的作用</span></a></h4><ol><li><p><strong>突破 DOM 层次结构的限制</strong>：</p><ul><li>在常规情况下，React 组件的渲染是嵌套在父组件的 DOM 节点内的。但有时候，某些 UI 组件（例如模态框、弹出框或工具提示）需要渲染在页面的特定位置，而不是当前的父组件中。Portals 允许你将这些组件渲染到 DOM 树的其它节点中。</li></ul></li><li><p><strong>保持组件的上下文</strong>：</p><ul><li>尽管子组件在 DOM 结构上与父组件不在同一个节点树中，但子组件仍然完全保留在 React 的组件树中，因此上下文（如 Redux store、主题等）仍然有效。这意味着子组件可以正常访问 React 传递的上下文信息（如 <code>context</code>、<code>props</code> 等）。</li></ul></li><li><p><strong>处理 z-index 和样式层叠问题</strong>：</p><ul><li>当需要确保某个组件（如模态框）在整个页面的顶层显示时，使用 Portals 可以避免样式层叠问题（如 <code>z-index</code> 冲突）。</li></ul></li></ol><h4 id="portals-的使用方法" tabindex="-1"><a class="header-anchor" href="#portals-的使用方法"><span>Portals 的使用方法</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">Modal</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">return</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createPortal</span><span class="token punctuation">(</span></span>
<span class="line">           <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;modal&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">              <span class="token punctuation">{</span>children<span class="token punctuation">}</span></span>
<span class="line">           <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span></span>
<span class="line">           document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;modal-root&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 将组件渲染到 `#modal-root` 节点</span></span>
<span class="line">   <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> Modal<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="使用场景" tabindex="-1"><a class="header-anchor" href="#使用场景"><span>使用场景</span></a></h4><ul><li><strong>模态框</strong>：当你需要一个全屏模态框，且它需要在 DOM 树中高层显示时，使用 Portals 是理想的选择。</li><li><strong>工具提示</strong>：当需要将工具提示渲染在特定位置且不被父组件的 overflow 属性裁剪时，Portals 可以解决这个问题。</li><li><strong>通知系统</strong>：可以将全局通知渲染在应用的根 DOM 节点中，确保其在任何组件之上显示。</li></ul><h4 id="总结-3" tabindex="-1"><a class="header-anchor" href="#总结-3"><span>总结</span></a></h4><ul><li>Portals 提供了一种将组件渲染到父组件 DOM 结构之外的能力，而不会打破 React 的组件树结构</li><li>它非常适合需要突破 DOM 层次结构限制的场景，如模态框、工具提示等。</li></ul><h2 id="react-中-useref-hook-的使用" tabindex="-1"><a class="header-anchor" href="#react-中-useref-hook-的使用"><span>React 中 <code>useRef</code> Hook 的使用</span></a></h2><p><code>useRef</code> 是 React 提供的一个 Hook，允许你创建一个可变的、持久的引用对象。这个引用对象在组件的整个生命周期内保持不变，且不会因为组件的重新渲染而重新创建。</p><h4 id="使用方法" tabindex="-1"><a class="header-anchor" href="#使用方法"><span>使用方法</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useRef<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">   <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 在组件挂载后，自动聚焦到输入框</span></span>
<span class="line">      inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">   <span class="token keyword">return</span> <span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="useref-的常见用途" tabindex="-1"><a class="header-anchor" href="#useref-的常见用途"><span><code>useRef</code> 的常见用途</span></a></h4><ol><li><strong>访问 DOM 元素</strong><ul><li><code>useRef</code> 最常见的用途是直接访问 DOM 元素。通过将 ref 属性赋值给一个 JSX 元素，React 会在组件挂载后将该 DOM 元素赋值给 useRef 返回的 current 属性，从而允许你直接访问和操作这个 DOM 元素。</li></ul></li></ol><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">FocusInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 手动聚焦输入框</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Focus the input</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>保存可变的值</strong><ul><li><code>useRef</code> 可以用来存储组件的某些可变数据，而不触发重新渲染。例如，你可以用它来保存前一个渲染周期的值、定时器 ID，或者其他不需要重新渲的变量。</li></ul></li></ol><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">Timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> timerRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">const</span> <span class="token function-variable function">startTimer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    timerRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">(</span>prevCount<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> prevCount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">const</span> <span class="token function-variable function">stopTimer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">clearInterval</span><span class="token punctuation">(</span>timerRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用 `useRef` 保存的定时器 ID 来清除定时器</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Count: </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>startTimer<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Start</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>stopTimer<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Stop</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="自定义-hooks-在-react-中的实现" tabindex="-1"><a class="header-anchor" href="#自定义-hooks-在-react-中的实现"><span>自定义 Hooks 在 React 中的实现</span></a></h2><p><strong>使用场景</strong></p><p>自定义 Hooks 是 React 提供的一种复用逻辑的方式，它可以用于以下场景：</p><ol><li><strong>复用逻辑</strong>：当多个组件中需要共享相同的逻辑时，可以将这些逻辑提取到一个自定义 Hook 中，而不是在每个组件中重复代码。</li><li><strong>简化组件代码</strong>：通过将复杂的逻辑封装在自定义 Hook 中，可以使组件代码更简洁、易于维护。</li><li><strong>逻辑隔离</strong>：将状态逻辑和副作用逻辑隔离到自定义 Hook 中，使得组件的关注点更加明确，易于管理。</li></ol><p><strong>创建方法</strong></p><h4 id="_1-基本自定义-hook-的创建" tabindex="-1"><a class="header-anchor" href="#_1-基本自定义-hook-的创建"><span>1. 基本自定义 Hook 的创建</span></a></h4><p>自定义 Hook 是一个函数，其名称以 <code>use</code> 开头，函数内部可以调用其他 Hooks。下面是一个简单的自定义 Hook 示例：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 自定义 Hook：使用窗口宽度</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">useWindowWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token punctuation">[</span>windowWidth<span class="token punctuation">,</span> setWindowWidth<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 处理窗口尺寸变化的回调</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token function-variable function">handleResize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">setWindowWidth</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// 添加事件监听</span></span>
<span class="line">        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;resize&#39;</span><span class="token punctuation">,</span> handleResize<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// 清除事件监听</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;resize&#39;</span><span class="token punctuation">,</span> handleResize<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 空依赖数组意味着该 effect 只会在组件挂载和卸载时执行</span></span>
<span class="line">    <span class="token keyword">return</span> windowWidth<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="react-中-purecomponent-和-react-memo-的区别及适用场景" tabindex="-1"><a class="header-anchor" href="#react-中-purecomponent-和-react-memo-的区别及适用场景"><span>React 中 PureComponent 和 React.memo 的区别及适用场景</span></a></h2><h4 id="purecomponent" tabindex="-1"><a class="header-anchor" href="#purecomponent"><span>PureComponent</span></a></h4><p><code>PureComponent</code> 是 React 提供的一个基类组件，它是 <code>Component</code> 的一个变体。<code>PureComponent</code> 自动实现了 <code>shouldComponentUpdate</code> 方法，进行浅比较（shallow comparison）来决定组件是否需要重新渲染。</p><h4 id="使用方法-1" tabindex="-1"><a class="header-anchor" href="#使用方法-1"><span>使用方法</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>text<span class="token punctuation">}</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="特点" tabindex="-1"><a class="header-anchor" href="#特点"><span>特点</span></a></h4><ul><li><strong>浅比较</strong>：<code>PureComponent</code> 使用浅比较来检测 props 和 state 的变化。对于复杂的对象（如数组或对象），它只会比较引用是否发生变化。</li><li><strong>适用场景</strong>：适用于类组件，需要优化性能的情况下使用。如果组件的渲染与 props 或 state 的浅比较有关，可以使用 <code>PureComponent</code>。</li></ul><h4 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项"><span>注意事项</span></a></h4><ul><li><strong>浅比较的局限</strong>：浅比较对深层次数据结构（如深度嵌套的对象或数组）无效。如果组件的 props 或 state 包含复杂的数据结构，可能需要其他优化策略。</li></ul><h4 id="react-memo" tabindex="-1"><a class="header-anchor" href="#react-memo"><span>React.memo</span></a></h4><p><strong>介绍</strong><br><code>React.memo</code> 是一个高阶组件（HOC），用于优化函数组件的性能。它接受一个组件并返回一个优化过的组件，只有当 props 发生变化时才会重新渲染。</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> MyComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>特点</strong></p><ul><li><strong>浅比较</strong>：React.memo 默认使用浅比较来比较 props，决定组件是否需要重新渲染。</li><li><strong>自定义比较函数</strong>：可以传入一个自定义的比较函数，来实现更复杂的比较逻辑。</li></ul><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">const</span> MyComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>prevProps<span class="token punctuation">,</span> nextProps<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 自定义比较逻辑</span></span>
<span class="line">    <span class="token keyword">return</span> prevProps<span class="token punctuation">.</span>text <span class="token operator">===</span> nextProps<span class="token punctuation">.</span>text<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>适用场景</strong>：适用于函数组件，需要优化性能的情况下使用。特别是当函数组件接受复杂的 props 时，可以利用 React.memo 来减少不必要的渲染。</li></ul><p><strong>总结</strong></p><ul><li><code>PureComponent</code>：适用于类组件，通过浅比较 props 和 state 来优化性能。适合当组件逻辑和渲染与浅比较相关时使用。</li><li><code>React.memo</code>：适用于函数组件，通过浅比较或自定义比较函数来优化性能。适合函数组件，特别是当 props 比较复杂时使用。</li></ul><h2 id="react-中的-fragment" tabindex="-1"><a class="header-anchor" href="#react-中的-fragment"><span>React 中的 Fragment</span></a></h2><h4 id="什么是-fragment" tabindex="-1"><a class="header-anchor" href="#什么是-fragment"><span>什么是 Fragment？</span></a></h4><p><code>Fragment</code> 是 React 提供的一种组件，它允许你将一组子元素包裹在一起，而不额外生成任何 DOM 节点。<code>Fragment</code> 的语法类似于 HTML 的空标签 <code>&lt;&gt;&lt;/&gt;</code>，也可以使用 <code>&lt;React.Fragment&gt;&lt;/React.Fragment&gt;</code>。</p><h4 id="作用" tabindex="-1"><a class="header-anchor" href="#作用"><span>作用</span></a></h4><ol><li><strong>避免额外的 DOM 节点</strong>：使用 <code>Fragment</code> 可以避免在渲染时生成不必要的包装元素，比如 <code>div</code> 或 <code>span</code>，使得输出的 HTML 更加简洁。</li><li><strong>提升性能</strong>：减少无意义的 DOM 层级，进而提升页面的性能，特别是在构建复杂组件结构时，避免因多余的节点导致的布局和样式问题。</li><li><strong>清晰的组件结构</strong>：使组件结构更加清晰和易于维护，避免由于多余的包装元素而增加的复杂度。</li></ol><h4 id="基本使用" tabindex="-1"><a class="header-anchor" href="#基本使用"><span>基本使用</span></a></h4><p>可以直接使用空标签（短语法）来创建 <code>Fragment</code>：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>标题<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>这是一个段落。<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> MyComponent<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="带有-key-属性的-fragment" tabindex="-1"><a class="header-anchor" href="#带有-key-属性的-fragment"><span>带有 key 属性的 Fragment</span></a></h4><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">ItemList</span><span class="token punctuation">(</span><span class="token punctuation">{</span> items <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token punctuation">{</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.Fragment</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>description<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">React.Fragment</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> ItemList<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="注意事项-1" tabindex="-1"><a class="header-anchor" href="#注意事项-1"><span>注意事项</span></a></h4><ul><li><strong>key 属性限制</strong>：Fragment 只能接收 key 属性，不能传递其他属性。</li><li><strong>仅用于包裹</strong>：Fragment 不能替代其他组件，只用于包裹子元素，不会生成任何实际的 DOM 节点。</li></ul><h2 id="usetransition-hook" tabindex="-1"><a class="header-anchor" href="#usetransition-hook"><span>useTransition Hook</span></a></h2><p><code>useTransition</code> 是 React 18 中引入的一个 Hook，用于处理 UI 中非紧急（低优先级）更新的过渡状态。<code>useTransition</code> 使开发者能够标记某些状态更新为“过渡”，从而允许 React 优先处理更紧急的更新（如用户输入）并将低优先级的更新推迟到合适的时间进行。</p><h4 id="作用-1" tabindex="-1"><a class="header-anchor" href="#作用-1"><span>作用</span></a></h4><ol><li><strong>管理过渡状态</strong>：<code>useTransition</code> 提供一个布尔值（<code>isPending</code>），用于指示某个状态更新是否处于过渡中，可以用来显示加载指示器或反馈给用户。</li><li><strong>优化性能</strong>：将不紧急的 UI 更新标记为过渡操作，React 会首先应用紧急的更新（如点击、输入等），然后在空闲时间应用过渡更新。这种机制可以防止不必要的阻塞和延迟，从而提升应用的响应速度。</li></ol><h4 id="使用方法-2" tabindex="-1"><a class="header-anchor" href="#使用方法-2"><span>使用方法</span></a></h4><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx" data-title="jsx"><pre><code><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token punctuation">[</span>isPending<span class="token punctuation">,</span> startTransition<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useTransition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token punctuation">[</span>list<span class="token punctuation">,</span> setList<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">startTransition</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 将此更新标记为过渡操作</span></span>
<span class="line">            <span class="token keyword">const</span> newList <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">20000</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Item </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token function">setList</span><span class="token punctuation">(</span>newList<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Load List</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token punctuation">{</span>isPending <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Loading...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">                </span><span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">                <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="如何在-react-中使用-context-api" tabindex="-1"><a class="header-anchor" href="#如何在-react-中使用-context-api"><span>如何在 React 中使用 Context API？</span></a></h2><p>React 的 Context API 用于在组件树中共享数据，而不需要通过每层组件手动传递 props。这对于需要在多层嵌套的组件之间传递全局数据（如用户信息、主题、语言设置等）非常有用。</p><h4 id="context-的工作原理" tabindex="-1"><a class="header-anchor" href="#context-的工作原理"><span>Context 的工作原理</span></a></h4><ol><li><strong>创建 Context</strong>：使用 <code>React.createContext</code> 创建一个新的 Context 对象。</li><li><strong>提供（Provider）数据</strong>：通过 <code>Context.Provider</code> 组件在组件树的上层提供数据。所有使用此 Provider 包裹的子组件都可以访问该数据。</li><li><strong>消费（Consumer）数据</strong>：通过 <code>Context.Consumer</code> 或 <code>useContext</code> Hook 在子组件中消费数据。</li></ol><h4 id="使用方法-3" tabindex="-1"><a class="header-anchor" href="#使用方法-3"><span>使用方法</span></a></h4><p>以下是一个简单的例子，演示如何使用 Context API 来共享主题数据：</p><ol><li><strong>创建 Context：</strong></li></ol><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx" data-title="jsx"><pre><code><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// 创建一个 Context 对象</span></span>
<span class="line"><span class="token keyword">const</span> ThemeContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>提供数据</strong></li></ol><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>theme<span class="token punctuation">,</span> setTheme<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;light&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ThemeContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> theme<span class="token punctuation">,</span> setTheme <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Toolbar</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ThemeContext.Provider</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><strong>消费数据</strong></li></ol><ul><li>使用 <code>Context.Consumer</code> 方式：</li></ul><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">Toolbar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ThemeContext.Consumer</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">{</span> theme<span class="token punctuation">,</span> setTheme <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">当前主题：</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTheme</span><span class="token punctuation">(</span>theme <span class="token operator">===</span> <span class="token string">&#39;light&#39;</span> <span class="token operator">?</span> <span class="token string">&#39;dark&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;light&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">                        切换主题</span>
<span class="line">                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ThemeContext.Consumer</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>使用 <code>useContext Hook</code> 方式：</li></ul><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">Toolbar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token punctuation">{</span> theme<span class="token punctuation">,</span> setTheme <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>ThemeContext<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">当前主题：</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTheme</span><span class="token punctuation">(</span>theme <span class="token operator">===</span> <span class="token string">&#39;light&#39;</span> <span class="token operator">?</span> <span class="token string">&#39;dark&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;light&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">                切换主题</span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="应用场景" tabindex="-1"><a class="header-anchor" href="#应用场景"><span>应用场景</span></a></h4><ol><li><strong>主题切换</strong>：使用 Context API 共享应用的主题信息（如颜色、字体大小），可以方便地在多个组件中访问和更新主题。</li><li><strong>用户认证</strong>：将用户信息（如登录状态、权限等）保存在 Context 中，便于在应用的任何部分使用。</li><li><strong>多语言支持</strong>：通过 Context API 在应用中共享语言设置和翻译数据，简化国际化处理。</li><li><strong>全局状态管理</strong>：对于中小型应用，Context 可以用来替代复杂的状态管理库（如 Redux），直接在组件树中管理全局状态。</li></ol><h2 id="useimperativehandle-和-forwardref" tabindex="-1"><a class="header-anchor" href="#useimperativehandle-和-forwardref"><span><code>useImperativeHandle</code> 和 <code>forwardRef</code></span></a></h2><p><code>useImperativeHandle</code> 和 <code>forwardRef</code> 是 React 提供的两个 Hook 和高阶函数，用于在函数组件中自定义暴露给父组件的实例方法或属性，从而实现对组件实例的控制。</p><h4 id="forwardref-的作用" tabindex="-1"><a class="header-anchor" href="#forwardref-的作用"><span><code>forwardRef</code> 的作用</span></a></h4><p><code>forwardRef</code> 是一个高阶函数，用于将 ref 从父组件“转发”到子组件，使得父组件可以访问子组件的 DOM 节点或组件实例。通常，函数组件没有实例，不能直接使用 <code>ref</code> 属性，但通过 <code>forwardRef</code> 可以实现这一功能。</p><h4 id="useimperativehandle-的作用" tabindex="-1"><a class="header-anchor" href="#useimperativehandle-的作用"><span><code>useImperativeHandle</code> 的作用</span></a></h4><p><code>useImperativeHandle</code> 是一个 Hook，结合 <code>forwardRef</code> 使用，用于自定义暴露给父组件的实例值。它允许你控制当组件被使用 <code>ref</code> 引用时，父组件能访问到哪些方法和属性。</p><h4 id="使用方法-4" tabindex="-1"><a class="header-anchor" href="#使用方法-4"><span>使用方法</span></a></h4><ol><li><strong>使用 <code>forwardRef</code> 转发 <code>ref</code>：</strong></li></ol><p>首先，通过 <code>forwardRef</code> 包裹子组件，使其能够接收父组件传递的 <code>ref</code>。</p><ol start="2"><li><strong>使用 <code>useImperativeHandle</code> 自定义暴露的实例方法或属性：</strong></li></ol><p>在子组件中使用 <code>useImperativeHandle</code>，并提供一个对象，定义要暴露给父组件的方法或属性。</p><h4 id="代码示例" tabindex="-1"><a class="header-anchor" href="#代码示例"><span>代码示例</span></a></h4><p>下面是一个使用 <code>forwardRef</code> 和 <code>useImperativeHandle</code> 的示例，演示如何在父组件中操作子组件的实例方法。</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx" data-title="jsx"><pre><code><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useRef<span class="token punctuation">,</span> useImperativeHandle<span class="token punctuation">,</span> forwardRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 定义一个子组件，使用 forwardRef 以接收 ref</span></span>
<span class="line"><span class="token keyword">const</span> FancyInput <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 使用 useImperativeHandle 来自定义暴露的实例方法或属性</span></span>
<span class="line">    <span class="token function">useImperativeHandle</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token function-variable function">focus</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token function-variable function">clear</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>输入一些内容...<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 父组件</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> fancyInputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FancyInput</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fancyInputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> fancyInputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">聚焦输入框</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> fancyInputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">清除输入框</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="应用场景-1" tabindex="-1"><a class="header-anchor" href="#应用场景-1"><span>应用场景</span></a></h4><ul><li><strong>控制子组件的行为</strong>：在某些情况下，父组件需要直接控制子组件的行为，例如表单验证、强制触发动画等。</li><li><strong>自定义组件实例方法</strong>：使用 <code>useImperativeHandle</code> 可以灵活地定义父组件对子组件的控制，而不需要将所有方法都定义为 props。</li><li><strong>操作 DOM 元素</strong>：在需要直接访问 DOM 元素时（如调用 <code>focus</code> 或 <code>scrollIntoView</code>），可以结合 <code>forwardRef</code> 和 <code>useImperativeHandle</code>。</li></ul><h2 id="react-lazy和suspense" tabindex="-1"><a class="header-anchor" href="#react-lazy和suspense"><span>React.lazy和Suspense</span></a></h2><blockquote><p>如何在React中实现代码分割？请简述React.lazy和Suspense的使用方法。</p></blockquote><h4 id="在-react-中实现代码分割" tabindex="-1"><a class="header-anchor" href="#在-react-中实现代码分割"><span>在 React 中实现代码分割</span></a></h4><p>在 React 中，代码分割可以通过 <code>React.lazy</code> 和 <code>Suspense</code> 来实现。这些工具帮助你将应用程序的代码拆分成更小的块，从而提高性能和加载速度。以下是如何使用它们的简要说明：</p><h4 id="_1-react-lazy" tabindex="-1"><a class="header-anchor" href="#_1-react-lazy"><span>1. <code>React.lazy</code></span></a></h4><p><code>React.lazy</code> 是一个用于动态导入组件的函数。它允许你在需要时才加载组件，从而实现懒加载。使用 <code>React.lazy</code> 可以减少初始加载时间和提升应用性能。</p><h4 id="_2-suspense" tabindex="-1"><a class="header-anchor" href="#_2-suspense"><span>2. <code>Suspense</code></span></a></h4><p><code>Suspense</code> 组件用于处理 <code>React.lazy</code> 加载组件时的回退界面。它会在 <code>React.lazy</code> 加载组件时显示一个占位内容，直到组件加载完成。</p><h4 id="使用方法-5" tabindex="-1"><a class="header-anchor" href="#使用方法-5"><span>使用方法：</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Suspense <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 使用 React.lazy 导入组件</span></span>
<span class="line"><span class="token keyword">const</span> MyComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./MyComponent&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>欢迎使用代码分割示例<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>加载中<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line">                <span class="token punctuation">{</span><span class="token comment">/* 延迟加载 MyComponent */</span><span class="token punctuation">}</span></span>
<span class="line">                <span class="token operator">&lt;</span>MyComponent <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="总结-4" tabindex="-1"><a class="header-anchor" href="#总结-4"><span>总结</span></a></h4><ul><li>使用 <code>React.lazy</code> 动态导入组件实现代码分割。</li><li>使用 <code>Suspense</code> 处理懒加载过程中显示的回退内容。</li></ul><h2 id="react中进行条件渲染的几种常见方法" tabindex="-1"><a class="header-anchor" href="#react中进行条件渲染的几种常见方法"><span>React中进行条件渲染的几种常见方法</span></a></h2><blockquote><p>组件如何在React中进行条件渲染？请列举几种常见的方法。</p></blockquote><p>在 React 中，条件渲染允许你根据不同的条件显示或隐藏组件。以下是几种常见的条件渲染方法：</p><h4 id="_1-使用-javascript-运算符" tabindex="-1"><a class="header-anchor" href="#_1-使用-javascript-运算符"><span>1. 使用 JavaScript 运算符</span></a></h4><p>可以使用 JavaScript 运算符（如三元运算符）在渲染时进行条件判断。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isLoggedIn <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token punctuation">{</span>isLoggedIn <span class="token operator">?</span> <span class="token operator">&lt;</span>WelcomeMessage <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token operator">&lt;</span>LoginPrompt <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在条件为 true 时渲染组件，否则不渲染任何内容。适用于条件渲染简单的场景。</p><h4 id="_2-使用-运算符" tabindex="-1"><a class="header-anchor" href="#_2-使用-运算符"><span>2. 使用 &amp;&amp; 运算符</span></a></h4><p>在条件为 true 时渲染组件，否则不渲染任何内容。适用于条件渲染简单的场景。</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">{</span> hasNotifications <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token punctuation">{</span>hasNotifications <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NotificationBadge</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-使用-if-语句" tabindex="-1"><a class="header-anchor" href="#_3-使用-if-语句"><span>3. 使用 if 语句</span></a></h4><p>可以在函数体内使用 if 语句来确定需要渲染的内容。</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">{</span> userRole <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>userRole <span class="token operator">===</span> <span class="token string">&#39;admin&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AdminPanel</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>userRole <span class="token operator">===</span> <span class="token string">&#39;user&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserDashboard</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">GuestPage</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-使用-switch-语句" tabindex="-1"><a class="header-anchor" href="#_4-使用-switch-语句"><span>4. 使用 switch 语句</span></a></h4><p>对于多个条件的情况，可以使用 switch 语句来管理复杂的条件渲染。</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">{</span> page <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> content<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">switch</span> <span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token string">&#39;home&#39;</span><span class="token operator">:</span></span>
<span class="line">      content <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HomePage</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token string">&#39;about&#39;</span><span class="token operator">:</span></span>
<span class="line">      content <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AboutPage</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token string">&#39;contact&#39;</span><span class="token operator">:</span></span>
<span class="line">      content <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ContactPage</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">default</span><span class="token operator">:</span></span>
<span class="line">      content <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NotFoundPage</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>content<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-使用函数组件" tabindex="-1"><a class="header-anchor" href="#_5-使用函数组件"><span>5. 使用函数组件</span></a></h4><p>通过将条件渲染逻辑封装到函数组件中，使主组件更简洁。</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">ConditionalContent</span><span class="token punctuation">(</span><span class="token punctuation">{</span> isVisible <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> isVisible <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">VisibleContent</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ConditionalContent</span></span> <span class="token attr-name">isVisible</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="react高阶组件" tabindex="-1"><a class="header-anchor" href="#react高阶组件"><span>React高阶组件</span></a></h2><blockquote><p>解释什么是“高阶组件”（Higher-Order Components，HOC），以及如何使用它？</p></blockquote><h4 id="什么是高阶组件" tabindex="-1"><a class="header-anchor" href="#什么是高阶组件"><span>什么是高阶组件？</span></a></h4><p>高阶组件（HOC）是一种 React 的高级技术，用于复用组件逻辑。HOC 是一个函数，它接受一个组件作为参数，并返回一个新的组件。这个新的组件通常会增加一些额外的功能或数据，从而增强原始组件。</p><h4 id="hoc-的作用" tabindex="-1"><a class="header-anchor" href="#hoc-的作用"><span>HOC 的作用</span></a></h4><ul><li><strong>复用组件逻辑</strong>：通过将逻辑封装在 HOC 中，可以在多个组件之间共享这些逻辑，而不需要重复代码。</li><li><strong>抽象化</strong>：HOC 可以将复杂的逻辑抽象到一个独立的函数中，使组件更加干净和易于维护。</li><li><strong>增强功能</strong>：HOC 可以为组件注入额外的属性或方法，从而扩展组件的功能。</li></ul><h4 id="如何使用-hoc" tabindex="-1"><a class="header-anchor" href="#如何使用-hoc"><span>如何使用 HOC</span></a></h4><p><strong>1. 定义一个 HOC</strong></p><p>创建一个函数，它接受一个组件作为参数，并返回一个新的组件：</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 定义 HOC</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">withExtraInfo</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"> <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token keyword">extends</span></span> React<span class="token punctuation">.</span>Component <span class="token punctuation">{</span></span>
<span class="line">   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">     <span class="token comment">// 传递额外的信息给 WrappedComponent</span></span>
<span class="line">     <span class="token keyword">const</span> extraInfo <span class="token operator">=</span> <span class="token punctuation">{</span> info<span class="token operator">:</span> <span class="token string">&#39;This is extra information&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">     <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WrappedComponent</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span></span> <span class="token attr-name">extraInfo</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>extraInfo<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. 使用 HOC</strong> 使用 HOC 来增强一个组件：</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> withExtraInfo <span class="token keyword">from</span> <span class="token string">&#39;./withExtraInfo&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 被增强的组件</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React</span><span class="token punctuation">.</span>Component <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>extraInfo<span class="token punctuation">.</span>info<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 使用 HOC</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withExtraInfo</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3. 调用被增强的组件</strong></p><p>在应用中使用增强后的组件</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> EnhancedComponent <span class="token keyword">from</span> <span class="token string">&#39;./EnhancedComponent&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EnhancedComponent</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="受控组件与非受控组件" tabindex="-1"><a class="header-anchor" href="#受控组件与非受控组件"><span>受控组件与非受控组件</span></a></h2><blockquote><p>什么是“受控组件”和“非受控组件”？它们之间的区别是什么？</p></blockquote><h4 id="受控组件" tabindex="-1"><a class="header-anchor" href="#受控组件"><span>受控组件</span></a></h4><p><strong>受控组件</strong>是指其值受 React 状态控制的组件。对于受控组件，组件的输入值（如 <code>&lt;input&gt;</code> 或 <code>&lt;textarea&gt;</code>）的状态存储在组件的状态中，并通过 React 的 <code>state</code> 来进行管理。当用户输入时，会触发事件处理程序更新组件的状态，这样组件的显示值会随状态的变化而变化。</p><h4 id="特点-1" tabindex="-1"><a class="header-anchor" href="#特点-1"><span>特点</span></a></h4><ul><li><strong>值由 React 状态控制</strong>：表单元素的值存储在组件的状态中，并通过状态变化更新输入值。</li><li><strong>可预测性高</strong>：由于组件的状态由 React 控制，因此组件的行为更加可预测。</li><li><strong>更容易验证和处理数据</strong>：受控组件的值在 React 状态中，因此可以方便地进行数据验证、格式化和处理。</li></ul><h4 id="示例" tabindex="-1"><a class="header-anchor" href="#示例"><span>示例</span></a></h4><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx" data-title="jsx"><pre><code><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">ControlledComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">const</span> <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">setValue</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">输入的值: </span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在上述示例中，<code>&lt;input&gt;</code> 的值由 <code>value</code> 状态控制，<code>handleChange</code> 方法更新该状态。</p><h4 id="非受控组件" tabindex="-1"><a class="header-anchor" href="#非受控组件"><span>非受控组件</span></a></h4><p><strong>非受控组件</strong>是指其值不受 React 状态控制的组件。对于非受控组件，输入值直接由 DOM 自己维护，React 不会控制这些元素的状态。通常使用 ref 来直接访问 DOM 元素以获取其当前值。</p><h4 id="特点-2" tabindex="-1"><a class="header-anchor" href="#特点-2"><span>特点</span></a></h4><ul><li>值由 DOM 控制：表单元素的值直接存储在 DOM 中，而不是 React 状态中。</li><li>适合快速开发或第三方库：如果你不需要对输入值进行复杂的验证或处理，非受控组件可以更快地开发。</li><li>使用 ref 获取值：通过 ref 可以直接访问 DOM 元素获取其值。</li></ul><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">UncontrolledComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">输入的值: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">提交</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在上述示例中，<input> 元素的值由 DOM 自己维护，通过 inputRef.current.value 获取当前输入的值</p><h4 id="何时使用受控组件和非受控组件" tabindex="-1"><a class="header-anchor" href="#何时使用受控组件和非受控组件"><span>何时使用受控组件和非受控组件</span></a></h4><ul><li><strong>使用受控组件</strong>：当你需要对输入数据进行实时的验证、格式化或响应时，比如实时表单验证、处理数据变化、需要一致性时，使用受控组件更为合适。</li><li><strong>使用非受控组件</strong>：当你只需要快速获取输入值或与第三方库集成，且不需要复杂的逻辑或实时响应时，使用非受控组件会更简单和快速。</li></ul><h2 id="react-中的虚拟-dom" tabindex="-1"><a class="header-anchor" href="#react-中的虚拟-dom"><span>React 中的虚拟 DOM</span></a></h2><blockquote><p>React中的虚拟DOM是什么？它如何提高性能？</p></blockquote><p><strong>虚拟 DOM</strong>（Virtual DOM）是 React 中的一种轻量级的 JavaScript 对象，它是对真实 DOM 的一种抽象表示。虚拟 DOM 是 React 为优化性能而使用的一个概念，它用来描述 UI 的状态结构，并在 JavaScript 内存中维护一个虚拟的 DOM 树。当状态或属性变化时，React 通过比较新旧虚拟 DOM 树的差异，只将需要更新的部分映射到真实的 DOM 上，从而提高了性能。</p><h4 id="虚拟-dom-的特点" tabindex="-1"><a class="header-anchor" href="#虚拟-dom-的特点"><span>虚拟 DOM 的特点</span></a></h4><ul><li><strong>轻量级</strong>：虚拟 DOM 是一个 JavaScript 对象，包含节点树结构和属性，不像真实 DOM 那样复杂。</li><li><strong>不可直接操作</strong>：虚拟 DOM 仅存在于内存中，用来与真实 DOM 进行对比和更新，不直接参与用户操作。</li><li><strong>高效的差异计算</strong>：通过 Diff 算法，React 可以高效地计算出最小的更新路径。</li></ul><h4 id="虚拟-dom-如何提高性能" tabindex="-1"><a class="header-anchor" href="#虚拟-dom-如何提高性能"><span>虚拟 DOM 如何提高性能？</span></a></h4><p><strong>1. 减少直接的 DOM 操作</strong></p><p>直接操作真实 DOM 通常代价昂贵，因为每次操作都会引发浏览器的重绘（Repaint）和重排（Reflow），这些操作需要耗费大量的资源。React 中的虚拟 DOM 则减少了这种直接操作的频率。</p><ul><li><strong>内存中比较</strong>：虚拟 DOM 存在于内存中，React 在 JavaScript 层面上对虚拟 DOM 进行高效的计算和比较（Diffing），而不是频繁地访问真实 DOM。</li><li><strong>最小化更新</strong>：通过批量处理和合并更新，React 将所有需要更新的变化应用到虚拟 DOM 上，再批量更新真实 DOM，减少了不必要的操作。</li></ul><p><strong>2. 使用 Diff 算法优化更新</strong></p><p>React 使用了一种高效的 Diff 算法来计算虚拟 DOM 树之间的差异：</p><ul><li><strong>O(n) 时间复杂度</strong>：React 的 Diff 算法能够在 O(n) 的时间复杂度内计算两个虚拟 DOM 树的差异，这比传统的深度比较（O(n^3)）要高效得多。</li><li><strong>局部更新</strong>：通过比较新旧虚拟 DOM 树，React 能够准确地找到需要更新的部分，而不会重新渲染整个页面。</li><li><strong>最小 DOM 更新</strong>：通过差异计算（Diffing），React 只对变化的部分进行更新，这样就减少了重排和重绘的次数，提升了渲染性能。</li></ul><p><strong>3. 批量更新</strong></p><ul><li><strong>批量更新机制</strong>：React 将多次状态更新合并成一次批量更新，并且在事件循环结束前只执行一次实际的 DOM 操作，从而避免了频繁的 DOM 操作。</li></ul><p><strong>4. 异步更新和 Fiber 架构</strong></p><ul><li><strong>异步可中断渲染</strong>：React 的 Fiber 架构允许将渲染任务拆分为可中断的小任务，React 可以优先处理用户交互等更重要的任务，提高了响应速度。</li><li><strong>分片更新</strong>：通过 Fiber 架构，React 可以在必要时暂停、终止或继续渲染任务，更灵活地利用资源。</li></ul><h4 id="虚拟-dom-的工作流程" tabindex="-1"><a class="header-anchor" href="#虚拟-dom-的工作流程"><span>虚拟 DOM 的工作流程</span></a></h4><ol><li><strong>创建虚拟 DOM</strong>：React 组件在初次渲染时，会创建一棵虚拟 DOM 树，描述 UI 的结构。</li><li><strong>渲染到真实 DOM</strong>：虚拟 DOM 初次渲染时，会映射为真实的 DOM 元素，显示在页面上。</li><li><strong>状态更新时创建新虚拟 DOM</strong>：当组件的状态或属性发生变化时，React 会创建一个新的虚拟 DOM 树。</li><li><strong>比较差异（Diffing）</strong>：React 会比较新旧虚拟 DOM 树，找出不同之处。</li><li><strong>更新真实 DOM（Reconciliation）</strong>：React 将差异应用到真实的 DOM 上，只更新必要的部分。</li></ol><h4 id="总结-5" tabindex="-1"><a class="header-anchor" href="#总结-5"><span>总结</span></a></h4><p>虚拟 DOM 通过在内存中进行高效的计算和差异比较，减少了对真实 DOM 的直接操作，从而提高了应用性能。在性能要求较高的场景下（如大量数据渲染、频繁更新 UI），虚拟 DOM 能显著提升 React 应用的响应速度和用户体验。</p><h2 id="react性能优化" tabindex="-1"><a class="header-anchor" href="#react性能优化"><span>React性能优化</span></a></h2><blockquote><p>在React中，如何优化组件的渲染性能？请列举几种方法。</p></blockquote><h4 id="react-中优化组件渲染性能的方法" tabindex="-1"><a class="header-anchor" href="#react-中优化组件渲染性能的方法"><span>React 中优化组件渲染性能的方法</span></a></h4><p>在 React 应用程序中，优化组件渲染性能对于提高用户体验非常重要。以下是几种常用的方法来优化 React 组件的渲染性能：</p><h4 id="_1-使用-react-memo" tabindex="-1"><a class="header-anchor" href="#_1-使用-react-memo"><span>1. 使用 React.memo</span></a></h4><p><code>React.memo</code> 是一个高阶组件，用于将纯函数组件进行性能优化。当组件的 props 没有发生变化时，<code>React.memo</code> 会阻止该组件重新渲染。</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx" data-title="jsx"><pre><code><span class="line"><span class="token keyword">const</span> MyComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 组件代码</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-使用-usememo-和-usecallback" tabindex="-1"><a class="header-anchor" href="#_2-使用-usememo-和-usecallback"><span>2. 使用 useMemo 和 useCallback</span></a></h4><ul><li><code>useMemo</code> 用于记忆计算结果，只有在依赖项发生变化时才会重新计算，避免不必要的重新计算。</li><li><code>useCallback</code> 用于记忆回调函数，只有在依赖项变化时才会生成新的函数引用，防止因回调函数重新生成而导致的子组件不必要的重新渲染。</li></ul><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">const</span> memoizedValue <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">computeExpensiveValue</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> memoizedCallback <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">doSomething</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-减少不必要的状态更新" tabindex="-1"><a class="header-anchor" href="#_3-减少不必要的状态更新"><span>3. 减少不必要的状态更新</span></a></h4><p>避免不必要的状态更新，例如将不相关的状态拆分为独立的状态变量，减少不必要的状态更新所导致的重新渲染。</p><h4 id="_4-虚拟化长列表" tabindex="-1"><a class="header-anchor" href="#_4-虚拟化长列表"><span>4. 虚拟化长列表</span></a></h4><p>使用如 <code>react-window</code> 或 <code>react-virtualized</code> 等库来虚拟化长列表，仅渲染可视区域的列表项，减少 DOM 节点的数量，提高渲染性能。</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> FixedSizeList <span class="token keyword">as</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-window&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">MyList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span></span>
<span class="line">    <span class="token attr-name">height</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">500</span><span class="token punctuation">}</span></span></span>
<span class="line">    <span class="token attr-name">itemCount</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1000</span><span class="token punctuation">}</span></span></span>
<span class="line">    <span class="token attr-name">itemSize</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">35</span><span class="token punctuation">}</span></span></span>
<span class="line">    <span class="token attr-name">width</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">300</span><span class="token punctuation">}</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">{</span> index<span class="token punctuation">,</span> style <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>style<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Item </span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-避免匿名函数和内联函数" tabindex="-1"><a class="header-anchor" href="#_5-避免匿名函数和内联函数"><span>5. 避免匿名函数和内联函数</span></a></h4><p>避免在渲染过程中使用匿名函数和内联函数，因为每次渲染都会创建一个新的函数实例，可能导致子组件不必要的重新渲染。</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token comment">// 不推荐</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click me</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 推荐</span></span>
<span class="line"><span class="token keyword">const</span> handleClick <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Handler code</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click me</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-使用-shouldcomponentupdate-或-purecomponent" tabindex="-1"><a class="header-anchor" href="#_6-使用-shouldcomponentupdate-或-purecomponent"><span>6. 使用 shouldComponentUpdate 或 PureComponent</span></a></h4><p>对于类组件，可以使用 <code>shouldComponentUpdate</code> 方法来控制组件是否需要重新渲染。或者，使用 <code>PureComponent</code> 代替 <code>Component</code>，它会在 <code>props</code> 和 <code>state</code> 未发生变化时阻止组件重新渲染。</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React</span><span class="token punctuation">.</span>PureComponent <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-使用代码分割" tabindex="-1"><a class="header-anchor" href="#_7-使用代码分割"><span>7. 使用代码分割</span></a></h4><p>使用 React 的动态 import() 或 React.lazy 和 Suspense 实现代码分割，只在需要时加载组件，减少初始加载时间。</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">const</span> OtherComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./OtherComponent&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.Suspense</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Loading...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">OtherComponent</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">React.Suspense</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_8-使用-concurrent-mode-并发模式" tabindex="-1"><a class="header-anchor" href="#_8-使用-concurrent-mode-并发模式"><span>8. 使用 Concurrent Mode (并发模式)</span></a></h4><p>使用 React 的并发模式来提高应用的响应能力，允许 React 中断不必要的渲染工作，将更紧急的任务优先渲染。</p><h2 id="proptypes和typescript" tabindex="-1"><a class="header-anchor" href="#proptypes和typescript"><span>PropTypes和TypeScript</span></a></h2><blockquote><p>React中的PropTypes和TypeScript有什么区别？你更倾向于使用哪一种类型检查方法？</p></blockquote><p><code>PropTypes</code> 和 <code>TypeScript</code> 都是用于类型检查的工具，但它们在功能、使用方式和提供的类型检查深度上有显著区别。以下是它们的主要区别和各自的优缺点：</p><h4 id="proptypes" tabindex="-1"><a class="header-anchor" href="#proptypes"><span>PropTypes</span></a></h4><ul><li><strong>用途</strong>: 用于运行时类型检查。</li><li><strong>定义</strong>: PropTypes 是 React 提供的内置工具，用于在运行时检查组件的 props 类型。</li><li><strong>语法</strong>: 定义组件的预期 props 类型，若类型不匹配，在开发环境下会发出警告。</li></ul><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">&#39;prop-types&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">MyComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Component logic</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">MyComponent<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    name<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span><span class="token builtin">string</span><span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span></span>
<span class="line">    age<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span><span class="token builtin">number</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="优点" tabindex="-1"><a class="header-anchor" href="#优点"><span>优点:</span></a></h4><p><strong>简单易用</strong>: 不需要额外的设置或工具链支持，直接在 React 项目中使用。 <strong>动态检查</strong>: 在运行时检查类型，有助于捕捉由动态数据导致的类型错误。</p><h4 id="缺点" tabindex="-1"><a class="header-anchor" href="#缺点"><span>缺点:</span></a></h4><p><strong>性能开销</strong>: 运行时的类型检查会有一定的性能损耗，尤其是在大型应用中。 <strong>类型检查不全面</strong>: 只检查 props 的类型，不能检查其他变量或函数的类型。 <strong>缺乏编译期检查</strong>: 无法在编译时发现类型错误，可能导致错误延后到运行时才被发现。</p><h4 id="typescript" tabindex="-1"><a class="header-anchor" href="#typescript"><span>TypeScript</span></a></h4><p><strong>用途</strong>: 用于编译时类型检查。 <strong>定义</strong>: <code>TypeScript</code> 是 <code>JavaScript</code> 的超集，提供静态类型系统和其他现代开发工具支持。 <strong>语法</strong>: 使用 <code>TypeScript</code> 为变量、函数和 <code>React</code> 组件的 <code>props</code> 提供静态类型定义。</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">type</span> <span class="token class-name">MyComponentProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> MyComponent<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>MyComponentProps<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Component logic</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="优点-1" tabindex="-1"><a class="header-anchor" href="#优点-1"><span>优点:</span></a></h4><p><strong>编译时类型检查</strong>: 能在编译时捕捉类型错误，减少运行时错误的发生。 <strong>更强的类型安全</strong>: 提供全面的类型检查，涵盖了函数参数、返回值、对象属性等。 <strong>更好的开发体验</strong>: 支持 IDE 提示、自动补全、重构和静态分析等现代开发工具。 <strong>更强的可维护性</strong>: 提高代码的可读性和可维护性，适用于大型项目。</p><h4 id="缺点-1" tabindex="-1"><a class="header-anchor" href="#缺点-1"><span>缺点:</span></a></h4><p><strong>需要学习曲线</strong>: 对于不熟悉 TypeScript 的开发者来说，需要时间去学习和适应。 <strong>需要额外配置</strong>: 需要额外的工具链配置（如 tsconfig.json）和编译步骤。</p><h4 id="我更倾向于使用哪一种类型检查方法" tabindex="-1"><a class="header-anchor" href="#我更倾向于使用哪一种类型检查方法"><span>我更倾向于使用哪一种类型检查方法？</span></a></h4><p>我更倾向于使用 TypeScript 进行类型检查，原因如下：</p><ol><li><strong>静态类型检查</strong>: TypeScript 在编译时就能发现类型错误，有助于提前发现并修复 bug，提高开发效率。</li><li><strong>更丰富的类型系统</strong>: TypeScript 提供更丰富的类型定义功能（如泛型、交叉类型、联合类型等），使得代码更加安全和可维护。</li><li><strong>更好的开发体验</strong>: TypeScript 能与现代 IDE 和编辑器（如 VSCode）集成，提供更好的开发体验（如智能提示、自动补全、类型导航等）。</li><li><strong>大型项目的最佳选择</strong>: 对于中大型项目或长期维护的项目，TypeScript 提供了更强的类型安全性和可维护性。</li></ol><h4 id="总结-6" tabindex="-1"><a class="header-anchor" href="#总结-6"><span>总结</span></a></h4><p>对于较小的项目或仅需轻量级类型检查的情况，可以考虑使用 <code>PropTypes</code>。但对于大中型项目或需要更严格类型安全的情况，<code>TypeScript</code> 是更好的选择</p><h2 id="react-中的错误边界" tabindex="-1"><a class="header-anchor" href="#react-中的错误边界"><span>React 中的错误边界</span></a></h2><blockquote><p>在React中如何处理错误边界？请解释什么是错误边界，并描述如何创建错误边界组件。</p></blockquote><h4 id="什么是错误边界" tabindex="-1"><a class="header-anchor" href="#什么是错误边界"><span>什么是错误边界？</span></a></h4><p>错误边界（Error Boundaries）是React中的一个组件，用于捕获其子组件树中发生的JavaScript错误。错误边界不会捕获以下情况的错误：</p><ul><li>事件处理器中的错误。</li><li>异步代码（如 <code>setTimeout</code> 或 <code>requestAnimationFrame</code>）中的错误。</li><li>服务端渲染中的错误。</li><li>自身（错误边界组件）内部的错误。</li></ul><p>错误边界组件的主要作用是防止因为一个组件的错误而导致整个React组件树崩溃。错误边界组件可以在捕获到错误时，显示备用UI，记录错误信息，或将错误报告给服务器。</p><h4 id="如何创建错误边界组件" tabindex="-1"><a class="header-anchor" href="#如何创建错误边界组件"><span>如何创建错误边界组件？</span></a></h4><p>要创建一个错误边界组件，需要定义一个类组件，并实现以下两个生命周期方法：</p><ol><li><code>static getDerivedStateFromError(error)</code>：在渲染阶段调用，用于更新state以触发降级UI。</li><li><code>componentDidCatch(error, info)</code>：在组件树中的某个子组件抛出错误后调用，可以用于记录错误日志或执行其他副作用操作。</li></ol><p>以下是一个简单的错误边界组件示例：</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx" data-title="jsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ErrorBoundary</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">hasError</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">static</span> <span class="token function">getDerivedStateFromError</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 更新state以触发降级UI</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">hasError</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">componentDidCatch</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> errorInfo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 可以在这里记录错误日志或将错误信息发送到服务器</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Error caught by ErrorBoundary:&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">,</span> errorInfo<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hasError<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 渲染备用UI</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">发生了错误。</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> ErrorBoundary<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="使用错误边界" tabindex="-1"><a class="header-anchor" href="#使用错误边界"><span>使用错误边界</span></a></h4><p>使用错误边界非常简单，只需将可能会出错的组件放在错误边界组件内即可。例如：</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> ErrorBoundary <span class="token keyword">from</span> <span class="token string">&#39;./ErrorBoundary&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> MyComponent <span class="token keyword">from</span> <span class="token string">&#39;./MyComponent&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ErrorBoundary</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyComponent</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ErrorBoundary</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个例子中，如果 <code>MyComponent</code> 发生错误，<code>ErrorBoundary</code> 将捕获错误并显示备用UI，而不会影响 App 的其他部分。</p><h2 id="react中的strictmode" tabindex="-1"><a class="header-anchor" href="#react中的strictmode"><span>React中的StrictMode</span></a></h2><blockquote><p>React中的StrictMode是什么？有什么作用？</p></blockquote><h4 id="什么是-strictmode" tabindex="-1"><a class="header-anchor" href="#什么是-strictmode"><span>什么是 StrictMode？</span></a></h4><p><code>StrictMode</code> 是 React 提供的一种开发模式，用于帮助开发者识别应用中的潜在问题。它类似于 JavaScript 的 <code>strict mode</code>，但只在开发环境中启用，不会影响生产构建。</p><p><code>StrictMode</code> 不会渲染任何可见的UI，而是为其子组件树触发额外的检查和警告。它可以帮助发现不安全的生命周期方法、过时的API、潜在的副作用问题，以及其他可能影响React未来版本兼容性的问题。</p><h4 id="strictmode-的作用" tabindex="-1"><a class="header-anchor" href="#strictmode-的作用"><span>StrictMode 的作用</span></a></h4><p><code>StrictMode</code> 有以下几个主要作用：</p><ol><li><p><strong>识别不安全的生命周期方法</strong>：例如，旧版本中的 <code>componentWillMount</code>、<code>componentWillReceiveProps</code> 和 <code>componentWillUpdate</code> 等生命周期方法，这些方法在未来版本中将被废弃。</p></li><li><p><strong>检测意外的副作用</strong>：在开发模式下，<code>StrictMode</code> 会强制组件的 <code>constructor</code>、<code>render</code> 和生命周期方法（如 <code>componentDidMount</code> 和 <code>componentDidUpdate</code>）被调用两次，以检测意外的副作用和不纯代码。</p></li><li><p><strong>识别不安全的 <code>ref</code> 用法</strong>：检测字符串 <code>ref</code> 的使用，并建议使用回调 <code>ref</code> 或 <code>React.createRef()</code>。</p></li><li><p><strong>警告使用已弃用的 findDOMNode 方法</strong>：帮助开发者识别并移除对 <code>findDOMNode</code> 的使用，该方法在未来版本中可能会被移除。</p></li><li><p><strong>检测意外的状态更新</strong>：在 <code>componentWillMount</code> 和 <code>componentWillReceiveProps</code> 等生命周期方法中执行的意外的状态更新。</p></li></ol><h4 id="如何使用-strictmode" tabindex="-1"><a class="header-anchor" href="#如何使用-strictmode"><span>如何使用 StrictMode？</span></a></h4><p><code>StrictMode</code> 组件可以用在整个应用程序或应用程序的某一部分。它通过简单地将组件包装在 <code>&lt;React.StrictMode&gt;</code> 标签中来启用。</p><p>以下是使用 <code>StrictMode</code> 的一个示例：</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx" data-title="jsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./App&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.StrictMode</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">React.StrictMode</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span></span>
<span class="line">    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个例子中，<code>App</code> 组件及其所有子组件都将受到 <code>StrictMode</code> 的影响。如果你只想在应用的某一部分使用 <code>StrictMode</code>，可以将其应用于特定的子树。</p><h4 id="注意事项-2" tabindex="-1"><a class="header-anchor" href="#注意事项-2"><span>注意事项</span></a></h4><ul><li><code>StrictMode</code> 仅在开发模式中生效，不会影响生产环境的性能。</li><li>通过使用 <code>StrictMode</code>，你可以更早地发现潜在问题，确保应用与未来的React版本保持兼容性。</li><li>使用 <code>StrictMode</code> 是一种最佳实践，能够帮助你更快地发现并解决问题，从而提高代码的质量和稳定性。 使用 StrictMode 是一种最佳实践，能够帮助你更快地发现并解决问题，从而提高代码的质量和稳定性。</li></ul><h2 id="react合成事件" tabindex="-1"><a class="header-anchor" href="#react合成事件"><span>React合成事件</span></a></h2><blockquote><p>在 React 中，什么是“合成事件”？它是如何运作的？</p></blockquote><h4 id="什么是合成事件" tabindex="-1"><a class="header-anchor" href="#什么是合成事件"><span>什么是合成事件？</span></a></h4><p><strong>合成事件（Synthetic Event）</strong> 是React为了解决浏览器兼容性问题而提供的一套跨浏览器的事件系统。合成事件是对原生浏览器事件的封装，它模仿了原生事件的行为并提供统一的接口，使得在所有浏览器中具有一致的行为。</p><p>在React中，所有的事件处理程序（如 <code>onClick</code>、<code>onChange</code> 等）都会接收到一个合成事件对象。这个对象是对原生事件的包装，提供了所有标准的事件属性，如 <code>type</code>、<code>target</code>、<code>currentTarget</code> 等，同时也包含了React特有的一些方法和属性。</p><h4 id="合成事件如何运作" tabindex="-1"><a class="header-anchor" href="#合成事件如何运作"><span>合成事件如何运作？</span></a></h4><p>React 使用<strong>事件委托</strong>和<strong>事件池化</strong>机制来实现合成事件，这些机制能够提升性能和内存使用效率。</p><ol><li><p><strong>事件委托（Event Delegation）</strong>：</p><ul><li>React 并不直接将事件处理程序附加到每一个 DOM 元素上。相反，它在组件挂载时将所有事件处理程序添加到最外层的容器（通常是<code>document</code>或<code>root</code>容器）上。</li><li>当事件被触发时，React 会通过事件冒泡机制捕获事件，并根据事件的<code>target</code>属性来确定具体哪个组件应该处理该事件。这种方式减少了内存消耗，因为只需要在根节点上添加一个事件监听器，而不是为每一个组件实例都添加事件监听器。</li></ul></li><li><p><strong>事件池化（Event Pooling）</strong>：</p><ul><li>React 为了提升性能，会对合成事件对象进行<strong>事件池化</strong>（Event Pooling）。也就是说，在事件回调结束之后，合成事件对象会被重用，而不是被销毁。</li><li>因此，在事件回调函数中，所有合成事件的属性会被重置为 <code>null</code>。如果需要异步访问事件属性（例如在 <code>setTimeout</code> 中），应使用 <code>event.persist()</code> 方法来保留事件对象。</li></ul></li></ol><h4 id="使用合成事件的好处" tabindex="-1"><a class="header-anchor" href="#使用合成事件的好处"><span>使用合成事件的好处</span></a></h4><ul><li><strong>跨浏览器兼容性</strong>：通过合成事件，React 能确保在不同的浏览器环境下具有一致的事件行为。</li><li><strong>性能优化</strong>：通过事件委托和事件池化，React 能有效减少事件处理器的数量，降低内存消耗和提高性能。</li></ul><h4 id="示例代码" tabindex="-1"><a class="header-anchor" href="#示例代码"><span>示例代码</span></a></h4><p>以下是一个简单的合成事件示例：</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx" data-title="jsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 合成事件对象</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;click&quot;</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 触发事件的DOM元素</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 异步访问事件属性</span></span>
<span class="line">        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 此时属性已经被重置为 null</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 使用 event.persist() 保留事件对象</span></span>
<span class="line">        event<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;click&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click Me</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="注意事项-3" tabindex="-1"><a class="header-anchor" href="#注意事项-3"><span>注意事项</span></a></h4><ul><li>如果在事件处理函数中需要异步使用事件对象（例如在 setTimeout 或 Promise 回调中），需要调用 event.persist() 方法来保留事件对象。</li><li>尽管合成事件的API和原生事件几乎相同，但它们不是原生事件，所以直接使用 addEventListener 等方法添加的事件不会经过合成事件系统。</li></ul><h2 id="react-中的-key-属性" tabindex="-1"><a class="header-anchor" href="#react-中的-key-属性"><span>React 中的 “Key” 属性</span></a></h2><blockquote><p>解释 React 中的“Key”属性的作用，以及为什么它在列表渲染中很重要？</p></blockquote><h4 id="key-属性的作用" tabindex="-1"><a class="header-anchor" href="#key-属性的作用"><span>Key 属性的作用</span></a></h4><p><strong>Key</strong> 是React用于标识哪些列表中的元素被修改、添加或删除的一种特殊属性。在React渲染列表时，为每一个列表元素指定一个唯一的<code>key</code>可以帮助React高效地更新用户界面。</p><p>React使用<code>key</code>来跟踪每个组件的身份，以便在组件更新时能够精准地确定哪些元素需要重新渲染，哪些可以复用。<code>key</code>的值通常使用列表数据中的唯一标识符（如ID）来设置。</p><h4 id="key-在列表渲染中的重要性" tabindex="-1"><a class="header-anchor" href="#key-在列表渲染中的重要性"><span>Key 在列表渲染中的重要性</span></a></h4><ol><li><p><strong>提升性能</strong>：在列表渲染时，<code>key</code>帮助React更高效地识别元素的变化。当React渲染一个列表时，如果没有<code>key</code>，它将会默认使用元素在列表中的索引来作为<code>key</code>，但这可能会导致不必要的重新渲染和性能下降。通过使用稳定的<code>key</code>，React可以最小化重新渲染的次数，只更新那些真正变化的元素。</p></li><li><p><strong>正确更新组件状态</strong>：<code>key</code>确保了React在渲染时能正确地关联元素和其对应的组件实例。如果列表的顺序发生了变化，没有唯一<code>key</code>的组件可能会错误地复用之前的状态或属性，导致意外的行为。</p></li></ol><h4 id="示例说明" tabindex="-1"><a class="header-anchor" href="#示例说明"><span>示例说明</span></a></h4><p>以下是一个包含<code>key</code>的简单列表渲染示例：</p><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx" data-title="jsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">ListComponent</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> items <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token punctuation">{</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span> <span class="token comment">// 使用唯一的key属性</span></span>
<span class="line">            <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个例子中，<code>item.id</code> 作为key的值，确保了每个列表元素在整个组件生命周期中都是唯一的。如果不提供key属性或使用不稳定的值（如索引），可能会出现以下问题：</p><ul><li>当列表顺序发生变化时，React会重新渲染整个列表，而不仅仅是受影响的部分。</li><li>组件状态可能会被意外复用，导致渲染结果不正确。</li></ul><h4 id="常见的错误用法" tabindex="-1"><a class="header-anchor" href="#常见的错误用法"><span>常见的错误用法</span></a></h4><ul><li><strong>使用索引作为 key</strong>：在列表不会发生重新排序、添加或删除操作时，使用索引作为key是安全的。但在其他情况下，使用索引可能会导致性能问题和状态错误。</li></ul><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token punctuation">{</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span> <span class="token comment">// 不推荐的用法</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>缺少唯一性</strong>：key必须在兄弟节点之间是唯一的，因此不能使用不唯一的值。</li></ul><h4 id="结论" tabindex="-1"><a class="header-anchor" href="#结论"><span>结论</span></a></h4><p><code>key</code> 是React渲染列表时的关键属性，它帮助React高效地更新DOM并保证组件状态的正确性。良好的key用法能够显著提升应用的性能和可靠性</p><h2 id="react实现ssr" tabindex="-1"><a class="header-anchor" href="#react实现ssr"><span>React实现SSR</span></a></h2><h4 id="使用-express-和-react-自定义实现-ssr" tabindex="-1"><a class="header-anchor" href="#使用-express-和-react-自定义实现-ssr"><span>使用 Express 和 React 自定义实现 SSR</span></a></h4><p>你也可以手动设置服务器端渲染，使用Node.js和Express结合react-dom/server库来完成。</p><h4 id="_1-安装依赖包" tabindex="-1"><a class="header-anchor" href="#_1-安装依赖包"><span>1. 安装依赖包</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">npm</span> <span class="token function">install</span> react react-dom express</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-创建服务器文件-server-js" tabindex="-1"><a class="header-anchor" href="#_2-创建服务器文件-server-js"><span>2. 创建服务器文件 <code>server.js</code></span></a></h4><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> React <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#39;react&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> ReactDOMServer <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#39;react-dom/server&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#39;./src/App&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>default<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">server<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> appHtml <span class="token operator">=</span> ReactDOMServer<span class="token punctuation">.</span><span class="token function">renderToString</span><span class="token punctuation">(</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"></span>
<span class="line">    &lt;!DOCTYPE html&gt;</span>
<span class="line">    &lt;html&gt;</span>
<span class="line">      &lt;head&gt;</span>
<span class="line">        &lt;title&gt;React SSR Example&lt;/title&gt;</span>
<span class="line">      &lt;/head&gt;</span>
<span class="line">      &lt;body&gt;</span>
<span class="line">        &lt;div id=&quot;root&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>appHtml<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;</span>
<span class="line">        &lt;script src=&quot;/bundle.js&quot;&gt;&lt;/script&gt;</span>
<span class="line">      &lt;/body&gt;</span>
<span class="line">    &lt;/html&gt;</span>
<span class="line">  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Server is running on http://localhost:3000&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-客户端代码-src-app-js" tabindex="-1"><a class="header-anchor" href="#_3-客户端代码-src-app-js"><span>3. 客户端代码 <code>src/App.js</code></span></a></h4><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello from SSR!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-编译客户端代码" tabindex="-1"><a class="header-anchor" href="#_4-编译客户端代码"><span>4. 编译客户端代码</span></a></h4><p>使用打包工具（如Webpack或Parcel）来编译客户端代码，并确保将它们与服务器端代码一起部署。</p><h4 id="ssr-的挑战" tabindex="-1"><a class="header-anchor" href="#ssr-的挑战"><span>SSR 的挑战</span></a></h4><ul><li><strong>更复杂的服务器配置</strong>：SSR需要设置服务器来处理请求和渲染，这可能需要额外的服务器配置和维护工作。</li><li><strong>更多的服务器负载</strong>：由于所有的页面都需要在服务器端渲染，SSR可能会增加服务器的负载。</li><li><strong>第三方库的兼容性问题</strong>：某些浏览器特定的第三方库可能无法在服务器端正常工作，需要做兼容性处理。</li></ul><h4 id="结论-1" tabindex="-1"><a class="header-anchor" href="#结论-1"><span>结论</span></a></h4><p>React 中的服务器端渲染可以带来显著的性能和SEO优势，特别是在首屏加载时间和动态内容索引方面。选择合适的SSR方案（如Next.js）可以帮助你更快速地实现服务器端渲染功能。</p><h2 id="react-中的依赖注入" tabindex="-1"><a class="header-anchor" href="#react-中的依赖注入"><span>React 中的依赖注入</span></a></h2><blockquote><p>在React中，如何实现依赖注入？请简述其实现思路和应用场景。</p></blockquote><h4 id="什么是依赖注入" tabindex="-1"><a class="header-anchor" href="#什么是依赖注入"><span>什么是依赖注入？</span></a></h4><p><strong>依赖注入（Dependency Injection, DI）</strong> 是一种设计模式，用于将组件的依赖关系从内部转移到外部，通过外部传递所需的依赖，使组件更具可复用性、可测试性和可维护性。在React中，依赖注入通常用于将服务、配置对象或其他依赖项注入到组件中。</p><h4 id="react-中实现依赖注入的思路" tabindex="-1"><a class="header-anchor" href="#react-中实现依赖注入的思路"><span>React 中实现依赖注入的思路</span></a></h4><p>在React中，有几种常见的实现依赖注入的方式：</p><ol><li><p><strong>使用 React 的 Context API</strong>：</p><ul><li>Context API 是React提供的一种跨组件树传递数据的机制。它可以用来在组件树的任意层级注入依赖。</li><li>通过创建一个Context对象，可以将数据或服务提供给树中的任何组件，而不需要通过层层的<code>props</code>传递。</li></ul></li><li><p><strong>使用高阶组件（HOC）</strong>：</p><ul><li>高阶组件是一种增强组件功能的模式，可以用于将依赖注入到目标组件中。</li><li>高阶组件通常接收一个组件作为参数，并返回一个增强后的新组件。通过这种方式，可以在组件中添加或替换依赖项。</li></ul></li><li><p><strong>通过组合（Composition）方式传递依赖</strong>：</p><ul><li>在React中，组合是一种推荐的模式，它通过使用<code>props</code>将依赖项直接传递到子组件。虽然不是严格意义上的依赖注入，但它是一种简单而有效的方式。</li></ul></li></ol><h4 id="使用-context-api-实现依赖注入" tabindex="-1"><a class="header-anchor" href="#使用-context-api-实现依赖注入"><span>使用 Context API 实现依赖注入</span></a></h4><p>以下是使用React Context API实现依赖注入的示例：</p><ol><li><strong>创建一个Context</strong>：</li></ol><div class="language-jsx line-numbers-mode" data-highlighter="prismjs" data-ext="jsx" data-title="jsx"><pre><code><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 创建一个服务对象或配置</span></span>
<span class="line"><span class="token keyword">const</span> MyService <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function-variable function">getData</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello from MyService&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 创建一个Context</span></span>
<span class="line"><span class="token keyword">const</span> MyServiceContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 创建一个Context Provider组件</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">MyServiceProvider</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyServiceContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>MyService<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">            </span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MyServiceContext.Provider</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 创建一个自定义hook来使用Context</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useMyService</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token function">useContext</span><span class="token punctuation">(</span>MyServiceContext<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-在应用中使用-context-provider" tabindex="-1"><a class="header-anchor" href="#_2-在应用中使用-context-provider"><span>2. 在应用中使用 Context Provider</span></a></h4><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> MyServiceProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./MyServiceContext&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> MyComponent <span class="token keyword">from</span> <span class="token string">&#39;./MyComponent&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyServiceProvider</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyComponent</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MyServiceProvider</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-在子组件中使用注入的依赖" tabindex="-1"><a class="header-anchor" href="#_3-在子组件中使用注入的依赖"><span>3. 在子组件中使用注入的依赖</span></a></h4><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useMyService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./MyServiceContext&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">MyComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> myService <span class="token operator">=</span> <span class="token function">useMyService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>myService<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> MyComponent<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="使用高阶组件实现依赖注入" tabindex="-1"><a class="header-anchor" href="#使用高阶组件实现依赖注入"><span>使用高阶组件实现依赖注入</span></a></h4><p><strong>1. 创建高阶组件（HOC）来注入依赖</strong></p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 创建一个高阶组件用于注入依赖</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">withMyService</span> <span class="token operator">=</span> <span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> MyService <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function-variable function">getData</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello from MyService using HOC&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WrappedComponent</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token attr-name">myService</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>MyService<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> withMyService<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. 在组件中使用高阶组件：</strong></p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> withMyService <span class="token keyword">from</span> <span class="token string">&#39;./withMyService&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">MyComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> myService <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>myService<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withMyService</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="应用场景-2" tabindex="-1"><a class="header-anchor" href="#应用场景-2"><span>应用场景</span></a></h4><ul><li><strong>跨组件共享服务或状态</strong>：需要在多个组件之间共享数据、服务或配置，例如认证服务、主题切换、语言国际化等。</li><li><strong>测试性</strong>：通过依赖注入，组件的依赖关系变得更明显，更容易在测试中替换或模拟。</li><li><strong>解耦组件</strong>：组件之间通过依赖注入减少了直接的相互依赖，提升了组件的复用性和可维护性。</li></ul><h4 id="结论-2" tabindex="-1"><a class="header-anchor" href="#结论-2"><span>结论</span></a></h4><p>在React中，可以使用多种方式来实现依赖注入，包括Context API、高阶组件和组合方式等。每种方式都有其适用的场景和优点，选择适合的方式可以帮助你构建更具扩展性和可维护性的React应用。</p><h2 id="在react中如何防止组件重复渲染" tabindex="-1"><a class="header-anchor" href="#在react中如何防止组件重复渲染"><span>在React中如何防止组件重复渲染</span></a></h2><blockquote><p>在React中，如何防止组件重复渲染？请简述导致重复渲染的常见原因及其解决方法。</p></blockquote><p>React 中最常见的问题之一是组件不必要地重新渲染。React 提供了两个方法，在这些情况下非常有用：</p><ul><li><code>React.memo()</code>：这可以防止不必要地重新渲染函数组件</li><li><code>PureComponent</code>：这可以防止不必要地重新渲染类组件<br> 这两种方法都依赖于对传递给组件的props的浅比较，如果 props 没有改变，那么组件将不会重新渲染。虽然这两种工具都非常有用，但是浅比较会带来额外的性能损失，因此如果使用不当，这两种方法都会对性能产生负面影响。 通过使用 React Profiler，可以在使用这些方法前后对性能进行测量，从而确保通过进行给定的更改来实际改进性能。</li></ul><h2 id="什么是-fiber-架构" tabindex="-1"><a class="header-anchor" href="#什么是-fiber-架构"><span>什么是 Fiber 架构？</span></a></h2><blockquote><p>React中的“Fiber架构”是什么？它带来了哪些变化？</p></blockquote><p><strong>Fiber</strong> 是React从16版本开始引入的一种新的协调引擎（reconciliation engine），它彻底重写了React内部的渲染机制。Fiber架构的目标是解决React在大型和复杂应用中的一些性能问题，特别是提升应用在高频率用户交互下的响应速度。</p><p>在传统的React架构中，组件的更新是同步的，一旦开始更新就无法中断，这可能导致在执行大量渲染任务时出现卡顿现象。Fiber架构通过引入“可中断的渲染”概念，将渲染过程分割成多个可以暂停和恢复的小任务，从而提升UI的响应性。</p><h4 id="fiber-架构带来的变化" tabindex="-1"><a class="header-anchor" href="#fiber-架构带来的变化"><span>Fiber 架构带来的变化</span></a></h4><ol><li><p><strong>可中断的渲染</strong>：</p><ul><li>在传统架构下，React的渲染是同步的，一次完整的渲染任务无法中断。而Fiber架构允许将渲染任务分解为多个小的工作单元，每个单元称为一个“Fiber”。</li><li>Fiber 使得渲染任务可以被暂停、终止或重新启动。这种机制允许浏览器在渲染过程中进行其他更高优先级的任务（如用户输入响应、动画等），从而避免页面卡顿。</li></ul></li><li><p><strong>优先级更新</strong>：</p><ul><li>Fiber引入了优先级的概念，不同类型的更新可以分配不同的优先级。例如，用户的直接交互（如点击或键入）优先级较高，而数据获取或后台同步的优先级较低。</li><li>React 可以根据优先级来决定在当前帧中执行哪些更新任务，哪些任务可以延后执行。这种优先级调度机制提升了用户体验，使得React在复杂应用场景下更加流畅和高效。</li></ul></li><li><p><strong>增量渲染（Incremental Rendering）</strong>：</p><ul><li>传统React渲染模型在更新组件树时，需要一次性完成整个渲染任务。Fiber架构允许将渲染任务分成多个小任务块，每次渲染只处理一部分内容。</li><li>这种增量渲染方式减少了渲染过程对主线程的长时间占用，使得应用能够更平滑地响应用户操作。</li></ul></li><li><p><strong>错误边界</strong>：</p><ul><li>Fiber架构为错误边界（Error Boundaries）的实现提供了更好的支持。在React 16中，组件可以通过实现<code>componentDidCatch</code>生命周期方法来捕获子组件树中的错误。</li><li>Fiber使得React可以在渲染过程中捕获异常，并在适当的地方恢复，不会因为某个组件的错误而导致整个应用崩溃。</li></ul></li><li><p><strong>更细粒度的生命周期控制</strong>：</p><ul><li>Fiber 重新定义了一些生命周期方法，使得它们与新的渲染机制更好地配合。例如，<code>componentWillMount</code>、<code>componentWillReceiveProps</code> 和 <code>componentWillUpdate</code> 被标记为不安全的生命周期方法，因为它们可能在Fiber的多次渲染过程中被多次调用。</li><li>新的生命周期方法（如<code>getDerivedStateFromProps</code> 和 <code>getSnapshotBeforeUpdate</code>）提供了更细粒度的控制和更明确的渲染意图。</li></ul></li></ol><h4 id="fiber-架构的实现原理" tabindex="-1"><a class="header-anchor" href="#fiber-架构的实现原理"><span>Fiber 架构的实现原理</span></a></h4><ol><li><p><strong>数据结构</strong>：</p><ul><li>Fiber 本质上是一个数据结构，它是React中的每个节点在协调过程中的最小单元。每个Fiber节点表示一个React元素，并保存了当前的组件类型、状态、更新队列、DOM引用等信息。</li><li>Fiber 树的构建和更新是异步的，React可以在不同的时间片中对Fiber树进行操作。</li></ul></li><li><p><strong>双缓存机制</strong>：</p><ul><li>Fiber使用双缓存树来实现可中断的渲染。React 会维护两棵 Fiber 树：<code>current</code> 树和 <code>workInProgress</code> 树。<code>current</code> 树表示当前已经在屏幕上展示的UI，而 <code>workInProgress</code> 树用于在背景中进行更新操作。</li><li>当 <code>workInProgress</code> 树完成更新后，React 会将它替换为新的 <code>current</code> 树。</li></ul></li><li><p><strong>时间切片</strong>：</p><ul><li>Fiber 利用了浏览器的“requestIdleCallback”或类似的机制来判断何时有空闲时间来进行渲染任务。React通过分割任务和调度高优先级任务，能够在多个帧之间分配工作，确保高效的UI更新。</li></ul></li></ol><h4 id="fiber-的应用场景" tabindex="-1"><a class="header-anchor" href="#fiber-的应用场景"><span>Fiber 的应用场景</span></a></h4><ul><li><strong>复杂交互和动画</strong>：当应用包含复杂的用户交互或动画时，Fiber架构能显著提高响应速度，避免掉帧或卡顿。</li><li><strong>大规模组件树更新</strong>：对于庞大的组件树或包含大量数据的渲染，Fiber可以通过增量渲染减少主线程的占用时间。</li><li><strong>用户体验优化</strong>：Fiber架构使得React能够更好地管理高优先级任务（如用户输入）和低优先级任务（如数据获取），提高应用的响应速度和流畅度。</li></ul><h4 id="结论-3" tabindex="-1"><a class="header-anchor" href="#结论-3"><span>结论</span></a></h4><p>React 的 Fiber 架构通过引入可中断的渲染、优先级调度和增量渲染等机制，显著提升了React在复杂应用中的性能和响应能力。它为开发者提供了更高效的渲染方式，改善了用户体验，特别是在需要高频次交互的应用场景中。</p><h2 id="一个完整的react-redux实例" tabindex="-1"><a class="header-anchor" href="#一个完整的react-redux实例"><span>一个完整的react-redux实例</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span></span>
<span class="line"><span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">&#39;prop-types&#39;</span></span>
<span class="line"><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux&#39;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Provider<span class="token punctuation">,</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// React component</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token punctuation">{</span> value<span class="token punctuation">,</span> onIncreaseClick <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props</span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>onIncreaseClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>Increase<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">Counter<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">value</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">onIncreaseClick</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">.</span>isRequired</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Action</span></span>
<span class="line"><span class="token keyword">const</span> increaseAction <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;increase&#39;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Reducer</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> count <span class="token operator">=</span> state<span class="token punctuation">.</span>count</span>
<span class="line">  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token string">&#39;increase&#39;</span><span class="token operator">:</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">default</span><span class="token operator">:</span></span>
<span class="line">      <span class="token keyword">return</span> state</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Store</span></span>
<span class="line"><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Map Redux state to component props</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">value</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Map Redux actions to component props</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">mapDispatchToProps</span><span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function-variable function">onIncreaseClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span>increaseAction<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Connected Component</span></span>
<span class="line"><span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span></span>
<span class="line">  mapStateToProps<span class="token punctuation">,</span></span>
<span class="line">  mapDispatchToProps</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">(</span>Counter<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">  <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span><span class="token punctuation">,</span></span>
<span class="line">  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: qing_321@126.com">qing_321</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/front-end/blog/assets/app-9v1S0hVW.js" defer></script>
  </body>
</html>
